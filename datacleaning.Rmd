---
title: "datacleaning"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(dplyr)
```

list.files(path="~/")

```{r import-data}
df<-read.table(file = 'data/all_emo_subjects.tsv', sep = '\t', header = TRUE)
```

start_with

```{r preclean-data}
# extract the fixation 
newdata <-  filter(df,GazeEventType=="Fixation")
# [ which(df$GazeEventType=='Fixation' ), ]
# extract condition from media 
newdata$condt <- as.factor(substr(newdata$MediaName, 1,5))
# delete the aoi condition with "all"
newdata %>% 
# select(-contains('ALL')) %>%  # If ABC is not 1, X is 1, it will be indicated in ALL condition 
  select (-FixationIndex)->newdata

```

```{r rearrange-data}
# extract all the aoi column into one column
df2<-newdata[,1:6]
df2$MediaName<-newdata$condt
df2$aoi<-""
for (i in 1:nrow(newdata)) {
  #for (j in 7:(ncol(newdata2)-1)) {
    # if (newdata[i,j]==1 && !is.na(newdata[i,j])) {df2$aoi[i]<-colnames(newdata)[j]}
    df2$aoi[i]<-colnames(newdata[min(which(newdata[i,]==1))])
  #}
}
# (1:nrow(mydata_2))[mydata_2[,4] == 1578]
```
   